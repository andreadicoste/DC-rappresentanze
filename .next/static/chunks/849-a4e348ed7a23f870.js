(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[849],{7849:function(e,a,t){Promise.resolve().then(t.bind(t,8301)),Promise.resolve().then(t.t.bind(t,5250,23)),Promise.resolve().then(t.bind(t,9721))},8301:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return d}});var r=t(3827),n=t(4090),s=t(5990);let o=s.rU,l={ingresso_gdo:"Ingresso in GDO",cash_carry:"Piano Cash & Carry / Ingrosso",vending:"Canale Vending",audit_portafoglio:"Audit portafoglio prodotti"},i=s.qU||{basePrices:{},addons:[],multipliers:{}};function d(){var e,a;let[t,d]=(0,n.useState)(0),[c,u]=(0,n.useState)({serviceType:"ingresso_gdo",addons:[],volumeStimato:2e4,referenze:3,urgency:"normale",note:""}),[b,m]=(0,n.useState)({name:"",email:"",phone:"",address:""}),[x,p]=(0,n.useState)("idle"),[f,h]=(0,n.useState)(null),v=(0,n.useMemo)(()=>(function(e){var a,t,r;let n=(null===(a=i.basePrices)||void 0===a?void 0:a[e.serviceType])||0,s=n,o=[{label:l[e.serviceType]||"Servizio",value:n}];e.addons.forEach(e=>{var a;let t=null===(a=i.addons)||void 0===a?void 0:a.find(a=>a.id===e);t&&(s+=t.price,o.push({label:t.label,value:t.price}))});let d=e.volumeStimato>0?1+Math.min(e.volumeStimato/5e4,.2):1,c=e.referenze>8?1.1:e.referenze>3?1.05:1,u=Math.round(d*c*("alta"===e.urgency?(null===(t=i.multipliers)||void 0===t?void 0:t.urgenza_alta)||1.15:1)*((null===(r=i.multipliers)||void 0===r?void 0:r.target_catena_top)||1.1)*s);return{min:Math.round(.9*u),max:Math.round(1.15*u),recommended:u,breakdown:o}})(c),[c]),g=e=>{u(a=>({...a,addons:a.addons.includes(e)?a.addons.filter(a=>a!==e):[...a.addons,e]}))},y=()=>d(e=>Math.min(e+1,3)),j=()=>d(e=>Math.max(e-1,0)),N=async()=>{p("loading"),h(null);try{var e,a;let t=await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...b,estimate:v.recommended,source:null===(e=s.gf)||void 0===e?void 0:e.source,stage:null===(a=s.gf)||void 0===a?void 0:a.defaultStage,extraData:{companyId:o,serviceType:c.serviceType,addons:c.addons,volumeStimato:c.volumeStimato,referenze:c.referenze,urgency:c.urgency,note:c.note}})});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||"Errore nell'invio")}p("success")}catch(e){p("error"),h((null==e?void 0:e.message)||"Errore inatteso")}};return(0,r.jsx)("div",{className:"pt-24 min-h-screen bg-[#F8FAFC]",children:(0,r.jsxs)("div",{className:"container mx-auto px-6 py-12 max-w-3xl",children:[(0,r.jsxs)("div",{className:"text-center mb-10",children:[(0,r.jsx)("span",{className:"text-brand-accent font-display font-bold text-xs uppercase tracking-widest mb-3 block",children:"Preventivatore"}),(0,r.jsx)("h1",{className:"font-display text-3xl md:text-4xl font-bold text-brand-primary mb-3",children:"Stima rapida"}),(0,r.jsx)("p",{className:"text-slate-500",children:"4 step semplici. Nessuna colonna doppia, tutto chiaro."})]}),(0,r.jsxs)("div",{className:"bg-white rounded-3xl shadow-soft border border-slate-100 p-8 space-y-8",children:[0===t&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h2",{className:"font-display text-2xl font-bold text-brand-primary",children:"Scegli il servizio"}),(0,r.jsx)("div",{className:"space-y-3",children:Object.entries(i.basePrices||{}).map(e=>{let[a,t]=e;return(0,r.jsxs)("label",{className:"flex items-center justify-between border rounded-2xl px-4 py-3 cursor-pointer transition-colors ".concat(c.serviceType===a?"border-brand-accent bg-blue-50":"border-slate-200"),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-bold text-brand-primary",children:l[a]||a}),(0,r.jsxs)("div",{className:"text-slate-500 text-sm",children:["Base: €",t]})]}),(0,r.jsx)("input",{type:"radio",name:"service",checked:c.serviceType===a,onChange:()=>u(e=>({...e,serviceType:a}))})]},a)})}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("div",{}),(0,r.jsx)("button",{onClick:y,className:"px-6 py-3 bg-brand-primary text-white rounded-xl font-bold transition-all duration-300 hover:bg-gradient-to-r hover:from-brand-accent hover:to-blue-400",children:"Avanti"})]})]}),1===t&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h2",{className:"font-display text-2xl font-bold text-brand-primary",children:"Dati tecnici"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-brand-primary",children:"Volume stimato annuo (€)"}),(0,r.jsx)("input",{type:"number",value:c.volumeStimato,onChange:e=>u(a=>({...a,volumeStimato:Number(e.target.value)||0})),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:border-brand-accent focus:ring-1 focus:ring-brand-accent transition-all"}),(0,r.jsx)("label",{className:"block text-sm font-bold text-brand-primary mt-4",children:"Numero referenze"}),(0,r.jsx)("input",{type:"number",value:c.referenze,onChange:e=>u(a=>({...a,referenze:Number(e.target.value)||0})),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:border-brand-accent focus:ring-1 focus:ring-brand-accent transition-all"}),(0,r.jsx)("label",{className:"block text-sm font-bold text-brand-primary mt-4",children:"Urgenza"}),(0,r.jsxs)("select",{value:c.urgency,onChange:e=>u(a=>({...a,urgency:e.target.value})),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:border-brand-accent focus:ring-1 focus:ring-brand-accent transition-all",children:[(0,r.jsx)("option",{value:"normale",children:"Normale"}),(0,r.jsx)("option",{value:"alta",children:"Alta (priorit\xe0)"})]}),(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,r.jsx)("div",{className:"font-bold text-brand-primary text-sm",children:"Extra"}),null===(e=i.addons)||void 0===e?void 0:e.map(e=>(0,r.jsxs)("label",{className:"flex items-center gap-3 text-slate-700",children:[(0,r.jsx)("input",{type:"checkbox",checked:c.addons.includes(e.id),onChange:()=>g(e.id)}),(0,r.jsxs)("span",{children:[e.label," (+€",e.price,")"]})]},e.id))]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("button",{onClick:j,className:"px-6 py-3 bg-white border border-slate-200 rounded-xl font-bold text-brand-primary hover:border-brand-accent transition",children:"Indietro"}),(0,r.jsx)("button",{onClick:y,className:"px-6 py-3 bg-brand-primary text-white rounded-xl font-bold transition-all duration-300 hover:bg-gradient-to-r hover:from-brand-accent hover:to-blue-400",children:"Avanti"})]})]}),2===t&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h2",{className:"font-display text-2xl font-bold text-brand-primary",children:"I tuoi dati"}),(0,r.jsx)("label",{className:"block text-sm font-bold text-brand-primary",children:"Nome e cognome"}),(0,r.jsx)("input",{type:"text",value:b.name,onChange:e=>m(a=>({...a,name:e.target.value})),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:border-brand-accent focus:ring-1 focus:ring-brand-accent transition-all",required:!0}),(0,r.jsx)("label",{className:"block text-sm font-bold text-brand-primary",children:"Email"}),(0,r.jsx)("input",{type:"email",value:b.email,onChange:e=>m(a=>({...a,email:e.target.value})),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:border-brand-accent focus:ring-1 focus:ring-brand-accent transition-all",required:!0}),(0,r.jsx)("label",{className:"block text-sm font-bold text-brand-primary",children:"Telefono"}),(0,r.jsx)("input",{type:"tel",value:b.phone,onChange:e=>m(a=>({...a,phone:e.target.value})),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:border-brand-accent focus:ring-1 focus:ring-brand-accent transition-all"}),(0,r.jsx)("label",{className:"block text-sm font-bold text-brand-primary",children:"Indirizzo / Azienda"}),(0,r.jsx)("input",{type:"text",value:b.address,onChange:e=>m(a=>({...a,address:e.target.value})),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:border-brand-accent focus:ring-1 focus:ring-brand-accent transition-all"}),(0,r.jsx)("label",{className:"block text-sm font-bold text-brand-primary",children:"Note tecniche (facoltative)"}),(0,r.jsx)("textarea",{value:c.note,onChange:e=>u(a=>({...a,note:e.target.value})),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:outline-none focus:border-brand-accent focus:ring-1 focus:ring-brand-accent transition-all h-24",placeholder:"Specifiche prodotti, tempistiche, canale..."}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("button",{onClick:j,className:"px-6 py-3 bg-white border border-slate-200 rounded-xl font-bold text-brand-primary hover:border-brand-accent transition",children:"Indietro"}),(0,r.jsx)("button",{onClick:y,className:"px-6 py-3 bg-brand-primary text-white rounded-xl font-bold transition-all duration-300 hover:bg-gradient-to-r hover:from-brand-accent hover:to-blue-400",children:"Avanti"})]})]}),3===t&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"font-display text-2xl font-bold text-brand-primary",children:"Riepilogo e stima"}),(0,r.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-6 border border-slate-200 space-y-3",children:[(0,r.jsx)("div",{className:"text-sm text-slate-500",children:"Servizio"}),(0,r.jsx)("div",{className:"text-brand-primary font-bold",children:l[c.serviceType]||c.serviceType}),(0,r.jsx)("div",{className:"text-sm text-slate-500",children:"Stima"}),(0,r.jsxs)("div",{className:"text-3xl font-display font-bold text-brand-primary",children:["€",v.min," - €",v.max]}),(0,r.jsxs)("div",{className:"text-sm text-slate-500",children:["Raccomandato: €",v.recommended]})]}),(0,r.jsx)("div",{className:"space-y-2",children:v.breakdown.map(e=>(0,r.jsxs)("div",{className:"flex justify-between text-sm text-slate-700 border-b border-slate-100 pb-1",children:[(0,r.jsx)("span",{children:e.label}),(0,r.jsxs)("span",{children:["€",e.value]})]},e.label))}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("button",{onClick:j,className:"px-6 py-3 bg-white border border-slate-200 rounded-xl font-bold text-brand-primary hover:border-brand-accent transition",children:"Indietro"}),(0,r.jsx)("button",{onClick:N,disabled:"loading"===x||"success"===x,className:"px-6 py-3 bg-brand-primary text-white rounded-xl font-bold transition-all duration-300 hover:bg-gradient-to-r hover:from-brand-accent hover:to-blue-400 disabled:opacity-70 disabled:cursor-not-allowed",children:"success"===x?"Inviato":"loading"===x?"Invio...":"Conferma e invia"})]}),"success"===x&&(0,r.jsxs)("p",{className:"text-sm text-emerald-600",children:["Richiesta inviata correttamente. ",(null===(a=s.qi)||void 0===a?void 0:a.formSuccessMessage)||"Ti ricontatteremo a breve."]}),"error"===x&&f?(0,r.jsx)("p",{className:"text-sm text-red-600",children:f}):null]})]})]})})}},9721:function(e,a,t){"use strict";function r(e){let{reason:a,children:t}=e;return t}Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"BailoutToCSR",{enumerable:!0,get:function(){return r}}),t(9775)},5990:function(e){"use strict";e.exports=JSON.parse('{"rU":"8d43cc6f-29a5-41e2-983c-02fb5bbf3cdd","qi":{"formSuccessMessage":"Grazie! Ti ricontatteremo entro 24 ore."},"gf":{"notesPrefix":"Dati preventivo","source":"preventivatore","defaultStage":"da contattare"},"qU":{"basePrices":{"ingresso_gdo":1800,"cash_carry":1400,"vending":1200,"audit_portafoglio":950},"addons":[{"id":"reportistica","label":"Reportistica avanzata","price":250},{"id":"formazione","label":"Formazione rete vendita","price":350},{"id":"fiere","label":"Supporto fiere/degustazioni","price":300}],"multipliers":{"urgenza_alta":1.15,"target_catena_top":1.1}}}')}}]);